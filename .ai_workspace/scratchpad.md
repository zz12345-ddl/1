# PakePlus 无Token打包优化项目

## 背景和动机

**项目目标**：基于PakePlus进行二次开发定制，实现以下核心功能提升：

**用户需求**：
1. **GitHub Token 可选化** - 普通用户可以不需要token直接打包
2. **PWA 一键支持** - 任何网站都可以一键支持PWA模式，无需网站修改  
3. **移动端配置增强** - 支持更多移动端配置选项，包括菜单栏、顶部导航栏、顶部工具栏、侧边栏等
4. **去除原作者信息** - 移除项目中的原作者相关信息，完全定制化

**当前状况**：
- 项目已部分支持无token操作（项目创建、本地预览、静态文件打包）
- 但在编辑页面发布和移动端发布功能中仍有强制token验证
- PWA功能存在但不够完善，需要增强自动化支持
- 移动端配置选项相对基础，需要扩展更多UI定制选项
- 项目中包含大量原作者信息需要清理

## 关键挑战和分析

**技术难点**：
1. **Token可选化实现**
   - 移除强制token验证而不破坏现有云端编译功能
   - 区分有token和无token用户的不同使用流程
   - 确保无token用户可以完整使用本地编译流程

2. **PWA自动化支持**
   - 自动生成PWA manifest文件和Service Worker
   - 处理各种网站的兼容性问题
   - 集成到现有的打包流程中

3. **移动端配置扩展**
   - 扩展现有的phone配置结构
   - 增加header、siderMenu、tabBar等详细配置
   - 设计用户友好的配置界面

4. **原作者信息清理**
   - 系统性地查找和替换所有相关信息
   - 包括代码、配置、文档、UI文本等

**解决方案**：
1. **本地打包模式** - 利用Tauri的本地构建能力作为fallback
2. **PWA模板系统** - 创建通用的PWA配置模板和自动注入机制
3. **配置系统重构** - 扩展ppconfig.json中的phone配置结构
4. **批量替换工具** - 系统性地清理原作者信息

**权衡分析**：
- 优势：大幅提升用户体验，降低使用门槛，增强功能完整性
- 风险：需要确保不破坏现有核心功能
- 实现复杂度：中高等，涉及多个模块的协调修改

## 高层任务拆分

### 任务1：GitHub Token可选化实现
- **文件**：`src/pages/edit.vue`, `src/pages/phone.vue`, `src/pages/home.vue`
- **位置**：edit.vue第891行和1457行，phone.vue第1231行和1709行
- **成功标准**：无token用户可以使用本地编译功能，有token用户保持原有云端编译功能
- **依赖关系**：无

### 任务2：PWA一键支持功能实现
- **文件**：新建PWA模块，修改打包流程
- **成功标准**：任何网站URL都可以自动生成PWA应用，包含manifest和service worker
- **依赖关系**：依赖任务1的本地模式

### 任务3：移动端配置选项扩展
- **文件**：`scripts/ppconfig.json`, `src/components/PhoneConfig.vue`, `src/pages/phone.vue`
- **成功标准**：提供丰富的移动端UI配置选项（菜单栏、导航栏、工具栏、侧边栏等）
- **依赖关系**：无

### 任务4：原作者信息清理
- **文件**：全项目范围
- **成功标准**：项目中不包含任何原作者相关信息
- **依赖关系**：可与其他任务并行
- **成功标准**：添加使用模式选择，清晰说明两种模式的区别

### 任务4：更新语言文件提示信息
- **文件**：`src/lang/zh_cn.ts`, `src/lang/en_us.ts`等
- **成功标准**：提示信息更加友好，明确说明无token也可使用

### 任务5：完善文档说明
- **文件**：`README.md`
- **成功标准**：详细说明无token使用方法和Docker编译流程

## 项目状态看板

### 待办任务
- [ ] 任务5：完善文档说明

### 已完成任务
- [x] 项目分析和需求理解
- [x] 制定修改方案
- [x] 任务1：修改编辑页面token验证逻辑
- [x] 任务2：修改移动端页面token验证逻辑
- [x] 任务3：优化首页用户体验
- [x] 任务4：更新语言文件提示信息
- [x] 为所有语言文件添加使用模式相关的翻译文本

### 阻塞的任务
- 无

## 执行者反馈或请求帮助

*等待执行者开始任务...*

## 经验教训

*项目进行中积累...*

---
*最后更新时间：2024-12-19*